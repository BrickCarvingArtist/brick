webpackJsonp([2,5],{20:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(5),o=n(a),s=r(4),i=n(s),d={tel:{label:"手机号",regExp:/^1[3578]\d{9}$/,message:function(){return this.label+"格式输入有误"}},user:{label:"用户名",regExp:/^\S+$/,message:function(){return this.label+"不能包含空格"}},password:{label:"密码",regExp:/^\S{6,16}$/,message:function(){return this.label+"必须为6至16位非空字符"}}};t.default={props:["type","middleware","dialog"],data:function(){return{value:""}},computed:{placeholder:function(){return"请输入"+d[this.type].label}},methods:{validate:function(){var e=d[this.type],t=+e.regExp.test(this.value);return this.$parent.$parent.$refs.dialog.message=[e.message(),""][t],t},handleCheck:function(){var e=this;return(0,i.default)(o.default.mark(function t(){var r,n,a;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof e.middleware){t.next=14;break}return t.prev=1,t.next=4,e.middleware(e.value);case 4:return r=t.sent,n=r.code,a=r.message,e.$parent.$parent.$refs.dialog.message=[a,""][n],t.abrupt("return",n);case 11:t.prev=11,t.t0=t.catch(1),e.$parent.$parent.$refs.dialog.message="网络错误";case 14:case"end":return t.stop()}},t,e,[[1,11]])}))()}}}},31:function(e,t,r){t=e.exports=r(9)(),t.push([e.id,".ipt-txt[data-v-350535e0]{margin-top:.625rem;width:100%;height:2.5rem}.ipt-txt input[data-v-350535e0]{box-sizing:border-box;padding-right:.625rem;padding-left:.625rem;width:inherit;height:inherit;border:none;font-size:.875rem;border:1px solid #999;transition:box-shadow .25s}.ipt-txt input[data-v-350535e0]:focus{border-color:#999}.ipt-txt.error input[data-v-350535e0]{border-color:red}","",{version:3,sources:["/./src/components/Input.vue"],names:[],mappings:"AACA,0BACE,mBAAqB,AACrB,WAAY,AACZ,aAAe,CAChB,AACD,gCACE,sBAAuB,AACvB,sBAAwB,AACxB,qBAAuB,AACvB,cAAe,AACf,eAAgB,AAChB,YAAa,AACb,kBAAoB,AACpB,sBAAuB,AACvB,0BAA6B,CAC9B,AACD,sCACE,iBAAmB,CACpB,AACD,sCACE,gBAAmB,CACpB",file:"Input.vue",sourcesContent:["\n.ipt-txt[data-v-350535e0] {\n  margin-top: 0.625rem;\n  width: 100%;\n  height: 2.5rem;\n}\n.ipt-txt input[data-v-350535e0] {\n  box-sizing: border-box;\n  padding-right: 0.625rem;\n  padding-left: 0.625rem;\n  width: inherit;\n  height: inherit;\n  border: none;\n  font-size: 0.875rem;\n  border: 1px solid #999;\n  transition: box-shadow 0.25s;\n}\n.ipt-txt input[data-v-350535e0]:focus {\n  border-color: #999;\n}\n.ipt-txt.error input[data-v-350535e0] {\n  border-color: #f00;\n}"],sourceRoot:"webpack://"}])},35:function(e,t,r){var n=r(31);"string"==typeof n&&(n=[[e.id,n,""]]);r(11)(n,{});n.locals&&(e.exports=n.locals)},38:function(e,t,r){var n,a;r(35),n=r(20);var o=r(39);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-350535e0",e.exports=n},39:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return t("div",{class:{"ipt-txt":1,error:e.dialog?e.dialog.message:0}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{placeholder:this.placeholder},domProps:{value:e._s(e.value)},on:{input:[function(t){t.target.composing||(e.value=t.target.value)},e.validate],change:e.handleCheck}})])},staticRenderFns:[]}},79:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=r(5),o=n(a),s=r(4),i=n(s),d=r(38),u=n(d);t.default={data:function(){return{user:"",password:"",message:"",middleware:function(e){var t=this;return(0,i.default)(o.default.mark(function r(){return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/checkUser?user="+e);case 2:return t.abrupt("return",t.sent.json());case 3:case"end":return t.stop()}},r,t)}))()}}},methods:{submit:function(){var e=this;return(0,i.default)(o.default.mark(function t(){var r,n,a,s,i,d;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.$refs,n=r.user,a=r.password,t.t1=n.validate(),!t.t1){t.next=6;break}return t.next=5,n.handleCheck();case 5:t.t1=t.sent;case 6:if(t.t0=t.t1,!t.t0){t.next=9;break}t.t0=a.validate();case 9:if(!t.t0){t.next=26;break}return t.prev=10,t.next=13,fetch("/api/signUp",{method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},credentials:"include",body:"user="+e.$refs.user.value+"&password="+e.$refs.password.value});case 13:return t.next=15,t.sent.json();case 15:if(s=t.sent,i=s.code,d=s.message,!i){t.next=20;break}return t.abrupt("return",e.$parent.$refs.dialog.message=d);case 20:e.$router.push("/me"),t.next=26;break;case 23:t.prev=23,t.t2=t.catch(10),e.$parent.$refs.dialog.message="网络错误";case 26:case"end":return t.stop()}},t,e,[[10,23]])}))()}},components:{MyInput:u.default},beforeCreate:function(){this.$parent.footer=0}}},117:function(e,t,r){t=e.exports=r(9)(),t.push([e.id,"form[data-v-1a889ef2]{padding:1.5rem}form h1[data-v-1a889ef2]{margin-bottom:1.5rem;font-size:1.25rem;line-height:1.5;border-bottom:1px solid #333;color:#333}.btn[data-v-1a889ef2]{margin-top:.625rem;margin-bottom:.625rem}p[data-v-1a889ef2]{text-align:right;font-size:.75rem}.anchor[data-v-1a889ef2]{color:#3060ff;transition:color .25s}.anchor[data-v-1a889ef2]:hover{color:red}","",{version:3,sources:["/./src/pages/SignUp.vue"],names:[],mappings:"AACA,sBACE,cAAgB,CACjB,AACD,yBACE,qBAAsB,AACtB,kBAAmB,AACnB,gBAAiB,AACjB,6BAA8B,AAC9B,UAAY,CACb,AACD,sBACE,mBAAqB,AACrB,qBAAwB,CACzB,AACD,mBACE,iBAAkB,AAClB,gBAAmB,CACpB,AACD,yBACE,cAAe,AACf,qBAAwB,CACzB,AACD,+BACE,SAAY,CACb",file:"SignUp.vue",sourcesContent:["\nform[data-v-1a889ef2] {\n  padding: 1.5rem;\n}\nform h1[data-v-1a889ef2] {\n  margin-bottom: 1.5rem;\n  font-size: 1.25rem;\n  line-height: 1.5;\n  border-bottom: 1px solid #333;\n  color: #333;\n}\n.btn[data-v-1a889ef2] {\n  margin-top: 0.625rem;\n  margin-bottom: 0.625rem;\n}\np[data-v-1a889ef2] {\n  text-align: right;\n  font-size: 0.75rem;\n}\n.anchor[data-v-1a889ef2] {\n  color: #3060ff;\n  transition: color 0.25s;\n}\n.anchor[data-v-1a889ef2]:hover {\n  color: #f00;\n}"],sourceRoot:"webpack://"}])},131:function(e,t,r){var n=r(117);"string"==typeof n&&(n=[[e.id,n,""]]);r(11)(n,{});n.locals&&(e.exports=n.locals)},160:function(e,t,r){var n,a;r(131),n=r(79);var o=r(162);a=n=n||{},"object"!=typeof n.default&&"function"!=typeof n.default||(a=n=n.default),"function"==typeof a&&(a=a.options),a.render=o.render,a.staticRenderFns=o.staticRenderFns,a._scopeId="data-v-1a889ef2",e.exports=n},162:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return t("form",[t("h1",["注册"])," ",t("my-input",{ref:"user",attrs:{type:"user",middleware:e.middleware}})," ",t("my-input",{ref:"password",attrs:{type:"password"}})," ",t("a",{staticClass:"btn",on:{click:e.submit}},["注册"])," ",t("p",[t("span",["已经拥有账号？赶紧"]),t("router-link",{staticClass:"anchor",attrs:{to:"/signIn"}},["登录"])])])},staticRenderFns:[]}}});
//# sourceMappingURL=2.c7622235bf3af8e5bdc3.js.map